<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>æ–°è¦ç™»éŒ² | TodoList</title>
	<link th:href="@{/css/register.css}" rel="stylesheet" />
</head>

<body>
	<div class="container">
		<div class="card">
			
			<h1 class="title">æ–°è¦ç™»éŒ²</h1>
			<p class="subtitle">TodoList</p>
			<!-- show error if exist-->
					<div th:if="${error != null}">
							    <div th:text="${error}"></div>
							</div>

			<!-- FORM -->
			<form id="registerForm" method="post" th:action="@{/register}">
				<label class="input-group">
					<div class="icon">ğŸ‘¤</div>
					<input type="text" id="username" name="username" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å" required>
				</label>

				<label class="input-group">
					<div class="icon">âœ‰ï¸</div>
					<input type="text" id="email" name="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹@example.com" required>
				</label>

				<label class="input-group">
					<span class="icon">ğŸ”’</span>
					<input id="password" type="password" name="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" required>
				</label>

				<div class="agree">
					<input type="checkbox" id="agree" required>
					<label for="agree">åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹</label>
					<button type="button" id="showTerms" class="terms-btn">
						åˆ©ç”¨è¦ç´„ã‚’è¦‹ã‚‹
					</button>
				</div>

				<button type="submit" class="btn">ç™»éŒ²ã™ã‚‹</button>

				<!-- ThÃ´ng bÃ¡o áº©n ban Ä‘áº§u -->
				<div id="successMsg" class="alert success-alert" style="display:none;">
					ğŸ‰ ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼
				</div>

				<div id="errorMsg" class="alert error-alert" style="display:none;">
					âš ï¸ å…¥åŠ›å†…å®¹ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
				</div>

			</form>

			<p class="login-text">
				ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ
				<a th:href="@{/login}">ãƒ­ã‚°ã‚¤ãƒ³</a>
			</p>

		</div>

	</div>
	<div id="termsModal" class="terms-modal" style="display:none;">
		<div class="terms-content">
			<h2>åˆ©ç”¨è¦ç´„</h2>
			<p>
				ã“ã“ã«åˆ©ç”¨è¦ç´„ã®å†…å®¹ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚<br>
				ãƒ»å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„<br>
				ãƒ»ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨æ¡ä»¶<br>
				ãƒ»ç¦æ­¢äº‹é … ãªã©
			</p>
			<!-- âš ï¸ Cáº¢NH BÃO -->
			<p class="terms-warning">
				æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç´›å¤±ã—ãŸå ´åˆã€å†ç™ºè¡Œã‚„å¾©æ—§ã¯ã§ãã¾ã›ã‚“ã€‚<br>
				å¿…ãšã”è‡ªèº«ã§å®‰å…¨ãªå ´æ‰€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚
			</p>

			<button type="button" id="closeTerms" class="btn">
				é–‰ã˜ã‚‹
			</button>
		</div>
	</div>

	<script>
		document.addEventListener("DOMContentLoaded", function () {

			const emailInput = document.getElementById("email");
			const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

			emailInput.addEventListener("input", function () {
				// XÃ³a lá»—i khi ngÆ°á»i dÃ¹ng nháº­p láº¡i
				emailInput.setCustomValidity("");
			});

			emailInput.addEventListener("blur", function () {
				if (!emailRegex.test(emailInput.value)) {
					emailInput.setCustomValidity(
						"æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„ (ä¾‹: example@gmail.com)"
					);
					emailInput.reportValidity(); // hiá»‡n bubble trá» vÃ o input
				}
			});

		});
		// ===== TERMS MODAL =====
		const showBtn = document.getElementById("showTerms");
		const closeBtn = document.getElementById("closeTerms");
		const modal = document.getElementById("termsModal");

		showBtn.addEventListener("click", function () {
			modal.style.display = "flex";
		});

		closeBtn.addEventListener("click", function () {
			modal.style.display = "none";
		});

	</script>
</body>

</html>